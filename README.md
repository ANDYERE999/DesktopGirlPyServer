# DesktopGirl服务端

这是DesktopGirl项目的服务端程序，提供了一个基于Gradio的Web界面来管理和监测服务端状态。

## 功能特性

### 性能监测器
- **电脑配置信息显示**：
  - 系统信息（操作系统、版本、机器类型等）
  - 处理器信息（CPU型号、核心数、频率等）
  - 内存信息（总内存、可用内存、使用率）
  - 显卡信息（GPU型号、显存、使用率、温度）

- **服务端资源占用监测**：
  - CPU使用率
  - 内存使用量和使用率
  - 线程数量
  - 文件句柄数
  - 运行时间统计

- **智能配置推荐**：
  - 根据硬件配置自动推荐适合的LLM模型大小
  - GPT-Sovits兼容性检测
  - API调用方案推荐
  - 网络环境检测（检测是否需要代理）

## 配置推荐逻辑

### macOS设备
- **内存 ≥ 32GB**：推荐27B/32B模型，支持GPT-Sovits
- **内存 ≥ 16GB**：推荐7B/14B模型，支持GPT-Sovits
- **内存 < 16GB**：推荐使用远程API，不推荐GPT-Sovits

### Windows设备
- **NVIDIA显卡显存 ≥ 24GB**：推荐27B/32B模型
- **NVIDIA显卡显存 ≥ 12GB**：推荐14B模型
- **NVIDIA显卡显存 ≥ 8GB**：推荐7B模型
- **内存 ≥ 8GB**：支持GPT-Sovits
- **无NVIDIA显卡或显存不足**：推荐使用远程API

### 通用建议
- 即使硬件性能足够，仍优先推荐使用远程API以获得更好效果
- 自动检测网络环境，为中国大陆用户提供代理配置提示

## 安装和使用

### 环境要求
- Python 3.8 或更高版本
- Windows 10/11 系统

### 安装依赖
```bash
pip install -r requirements.txt
```

### 启动服务端

#### 方法1：直接运行Python文件
```bash
python main.py
```

#### 方法2：使用批处理文件（Windows）
双击 `start_server.bat` 文件

### 访问界面
启动后，程序会自动在默认浏览器中打开Web界面，通常地址为：
`http://localhost:7860`

## 使用说明

### 性能监测器使用
1. 点击"性能监测器"标签页
2. 页面会自动加载当前系统配置和服务端资源占用信息
3. 点击"🔄 刷新信息"按钮可以手动更新信息
4. 勾选"自动刷新 (每5秒)"可以开启自动刷新功能
5. 查看底部的"推荐使用的配置"获得针对您设备的优化建议

### 监测信息说明
- **系统信息**：显示操作系统基本信息
- **处理器信息**：显示CPU相关参数
- **内存信息**：显示系统内存使用情况
- **显卡信息**：显示GPU状态和显存使用情况
- **服务端资源占用**：显示当前服务端进程的资源消耗
- **推荐配置**：基于硬件分析的最佳配置方案

## 依赖库
- `gradio>=3.50.0` - Web界面框架
- `psutil>=5.9.0` - 系统和进程信息获取
- `GPUtil>=1.4.0` - GPU信息获取
- `requests>=2.25.0` - 网络检测功能

## 注意事项
- 首次运行可能需要安装依赖库
- GPU信息获取需要NVIDIA显卡和驱动支持
- 某些系统信息可能因权限限制无法获取
- 网络环境检测需要联网，检测失败时会给出保守建议
- 配置推荐仅供参考，实际使用效果可能因具体硬件型号而异 